<div dir="rtl" style="font-family: David; font-size: 14pt;">

# מערכת ניהול טורניר כדורסל בין נבחרות  
מגישה: שרה בורגן  
היחידה הנבחרת: טורניר לאומי

---

## תוכן עניינים  
- [מבוא](#מבוא)  
- [ERD – תרשים ישויות וקשרים](#erd--תרשים-ישויות-וקשרים)  
- [DSD – תרשים מבנה נתונים](#dsd--תרשים-מבנה-נתונים)  
- [החלטות עיצוב](#החלטות-עיצוב)  
- [שיטות הכנסת נתונים](#שיטות-הכנסת-נתונים)  
  - [שיטה 1: Mockaroo](#שיטה-1-mockaroo)  
  - [שיטה 2: GenerateData](#שיטה-2-generatedata)  
  - [שיטה 3: Python Script](#שיטה-3-python-script)  
- [גיבוי ושחזור](#גיבוי-ושחזור)
- [שלב ב – שאילתות ועדכונים](#שלב-ב--שאילתות-ועדכונים)
  - [שאילתות SELECT](#שאילתות-select)
  - [שאילתות UPDATE](#שאילתות-update)
  - [שאילתות DELETE](#שאילתות-delete)
  - [אילוצים Constraints](#אילוצים-constraints)
- [שלב ג – אינטגרציה ומבטים](#שלב-ג--אינטגרציה-ומבטים)
  - [תרשים ERD](#תרשים-erd)
  - [תרשים DSD](#תרשים-dsd)
  - [החלטות אינטגרציה](#החלטות-אינטגרציה)
  - [מבט 1 – שחקני כדורסל לפי נבחרת](#מבט-1--שחקני-כדורסל-לפי-נבחרת)
  - [מבט 2 – שחקני כדורגל לפי משחקים](#מבט-2--שחקני-כדורגל-לפי-משחקים)
- [שלב ד – תכנות](#שלב-ד--תכנות)
  - [תוכנית ראשונה](#תוכנית-ראשונה)
  - [תוכנית שניה](#תוכנית-שניה)



---

## מבוא

מסד הנתונים של טורניר הכדורסל בין נבחרות לאומיות נבנה כדי לעזור לנהל בצורה מסודרת את כל מה שקשור לטורניר: קבוצות, שחקנים, מאמנים, שופטים, משחקים וטורנירים שמתקיימים כל שנה.

המערכת מאפשרת לשמור ולעקוב אחרי כל הפרטים שצריך – כמו מי שיחק מול מי, איזה שופט שפט איזה משחק, כמה נקודות כל קבוצה קיבלה, מי המאמן של כל קבוצה, ועוד.

### מטרת מסד הנתונים

המערכת נועדה לאפשר:

- רישום של קבוצות (נבחרות לאומיות) עם שם, מדינה, צבע מדים ומאמן.
- תיעוד של טורנירים לפי שנה ומדינה מארחת.
- יצירת משחקים כחלק מהטורניר.
- שיבוץ שופטים לכל משחק.
- שמירת תוצאה של כל קבוצה בכל משחק.
- תיעוד של שחקנים – כולל שם, תאריך לידה, גובה, תפקיד בקבוצה ומספר חולצה.

### שימושים אפשריים

- מנהלי הטורניר יכולים לתכנן בקלות את הטורניר, לנהל את הקבוצות, לקבוע משחקים ולשבץ שופטים.
- מאמנים יכולים לראות מי נמצא בקבוצה שלהם, לעקוב אחרי משחקים ולנתח תוצאות.
- שופטים משובצים למשחקים לפי הצורך, והמערכת שומרת את המידע הזה.
- סטודנטים או מנהלי מידע יכולים לשלוף מידע וסטטיסטיקות על קבוצות, שחקנים וטורנירים.

### למה זה חשוב

מסד הנתונים עוזר לעשות סדר בכל המידע שקשור לטורניר. הוא שומר על דיוק, מאפשר שליפות מהירות של מידע, ויכול בעתיד גם להתחבר לאתר או מערכת חיצונית להצגת התוצאות.

---

## ERD – תרשים ישויות וקשרים  
![image](https://github.com/user-attachments/assets/050bc705-4089-405d-9147-06625408fba9)

---

## DSD – תרשים מבנה נתונים  
![image](https://github.com/user-attachments/assets/183ad59d-af75-4ce1-b353-1cb044209343)

---

## החלטות עיצוב

- שימוש בטבלת Compets לקישור תוצאות משחקים עם קבוצות, משחקים וטורנירים.
- שימוש בטבלת Officiated_By עם מפתח משולב GameID + RefereeID.
- כל שחקן שייך לנבחרת אחת בלבד (TeamID).
- כל משחק שייך לטורניר אחד בלבד.

---

## שיטות הכנסת נתונים

### שיטה 1: Mockaroo  
שימש ליצירת נתונים עבור הטבלאות:
- Coach
- Game  
- Referee  
- Tournament  

קבצים לדוגמה:  
- [CoachMOCK_DATA.csv](שלב%20א/mockarooFiles/CoachMOCK_DATA.csv)  
- [GameMOCK_DATA.csv](שלב%20א/mockarooFiles/GameMOCK_DATA.csv)  
- [RefereeMOCK_DATA.csv](שלב%20א/mockarooFiles/RefereeMOCK_DATA.csv)  
- [TournamentMOCK_DATA.csv](שלב%20א/mockarooFiles/TournamentMOCK_DATA.csv)

תמונה:
![צילום מסך 2025-03-30 143231](https://github.com/user-attachments/assets/1b2e22cb-872b-4d1d-9c93-6e5bb3e1bfbc)

---

### שיטה 2: GenerateData  
שימש ליצירת נתונים עבור:
- Compets  
- NationalTeam  

קבצים לדוגמה:  
- [Competsgeneratedata.csv](שלב%20א/generatedataFiles/Competsgeneratedata.csv)  
- [nationalteamgenerateData.csv](שלב%20א/generatedataFiles/nationalteamgenerateData.csv)

תמונה:
![צילום מסך 2025-03-30 150846](https://github.com/user-attachments/assets/5a9ac7d9-2398-4edb-836d-b581765dc8b6)

---

### שיטה 3: Python Script  
שימש ליצירת פקודות SQL עבור:
- Officiated_By  

קבצי קוד:  
- [generate_officiated_by.py](שלב%20א/Programing/generate_officiated_by.py)

קבצי פלט:  
- [insert_officiated_by.sql](שלב%20א/Programing/insert_officiated_by.sql)

תמונה:
![צילום מסך 2025-03-30 160021](https://github.com/user-attachments/assets/d527d12d-6b8e-44ae-bb64-c4fbc40abd49)

---

## גיבוי ושחזור
תהליך הגיבוי בוצע באמצעות pgAdmin על ידי ייצוא קובץ `.sql`:

- הקובץ שנשמר:  
  [שלב א/Backup/backup_22_04_2025_11-21.backup](שלב%20א/Backup/backup_22_04_2025_11-21.backup)
  
שחזור הנתונים בוצע באמצעות ייבוא הקובץ חזרה ל־pgAdmin.
![image](https://github.com/user-attachments/assets/354d48a0-f38f-4870-a55a-9f0919e2a098)
![image](https://github.com/user-attachments/assets/c97f5329-5dac-43e1-9546-1c5ff25a926f)
תהליך שחזור-
![image](https://github.com/user-attachments/assets/ba1fa45f-5e26-41e5-a2bf-bc7e71284cfe)
![image](https://github.com/user-attachments/assets/71c65a65-1883-4085-b01d-7e2eec6db79a)
![image](https://github.com/user-attachments/assets/424681d6-7953-4cb4-af39-1242b9fa7e58)

---
## שלב ב – שאילתות ועדכונים

### שאילתות SELECT
שאילתא 1 – שם נבחרת, כמות שחקנים ושם המאמן
<br>
שאילתא זו מציגה לכל נבחרת את המידע הבא:
שם הקבוצה (TeamName),
מספר השחקנים בקבוצה (PlayerCount),
שם המאמן (פרטי ומשפחה).
השאילתא מבצעת חיבור (JOIN) בין הטבלאות NationalTeam, Player ו־Coach, ומקבצת (GROUP BY) לפי שם הנבחרת ושם המאמן.
זוהי שאילתא שימושית להצגת תמונת מצב של הקבוצות, כמות השחקנים ומי מאמן אותן.
<br>

צילום הרצה:
![image](https://github.com/user-attachments/assets/2061c6e3-1e09-422e-b8a2-b542c49c3e85)

צילום תוצאה:
![image](https://github.com/user-attachments/assets/78e5cfbb-c896-4c13-a291-05427d3e1f8a)
<br>

שאילתא 2 – כמות משחקים וקבוצות שמשחקות בכל חודש ושנה
<br>
שאילתא זו מציגה את הפעילות של משחקים לפי זמן – לכל שנה וחודש:
השנה שבה התקיימו המשחקים (Year),
החודש בתוך אותה שנה (Month),
מספר המשחקים השונים שנערכו (NumOfGames),
מספר הקבוצות השונות שהשתתפו באותם משחקים (NumOfTeams).
השאילתא מבצעת חיבור (JOIN) בין טבלת Game לטבלת Compets, משתמשת ב־EXTRACT כדי לחלץ את השנה והחודש מתוך התאריך, ומקבצת (GROUP BY) לפי שנה וחודש.
מטרת השאילתא היא לנתח פעילות חודשית של טורנירים – כמה משחקים התקיימו וכמה קבוצות השתתפו.
<br>

צילום הרצה:
![image](https://github.com/user-attachments/assets/dc5b505d-a8c1-469f-93bd-2bec70f981a8)

צילום תוצאה:
![image](https://github.com/user-attachments/assets/59223401-48c2-4316-b300-3e8837829387)
<br>

שאילתא 3 – השחקן הגבוה ביותר מכל נבחרת
<br>
שאילתא זו מציגה את השחקן הגבוה ביותר בכל קבוצה:
מזהה השחקן (PlayerID),
שם פרטי ושם משפחה של השחקן,
שם הקבוצה שהוא שייך אליה,
הגובה של השחקן (PlayerHeight).
השליפה נעזרת ב־JOIN בין Player ל־NationalTeam, וב־WHERE עם תת־שאילתה שמחזירה את הגובה הגבוה ביותר לכל TeamID.
כך מתקבלת רשימה שמציגה שחקן אחד (הכי גבוה) לכל קבוצה.
בנוסף, כל התוצאה ממוינת מהגבוה ביותר ומטה.
מטרת השאילתא היא לאפשר לבעלי קבוצות לזהות את השחקן הגבוה ביותר בכל נבחרת, מתוך מטרה לשקול רכישה של שחקנים בולטים שיכולים לתרום משמעותית לביצועים על המגרש.
<br>

צילום הרצה:
![image](https://github.com/user-attachments/assets/adfe89f7-414c-4b79-ae13-b7f8bac14d24)

צילום תוצאה:
![image](https://github.com/user-attachments/assets/fd851859-e534-4647-bf19-7fb725ad8162)
<br>

שאילתא 4 – ממוצע דירוג פיב״א לפי מיקום המשחק
<br>
שאילתא זו מציגה את איכות הקבוצות לפי מיקומים גאוגרפיים שבהם התקיימו משחקים, לפי דירוג פיב״א:
מיקום המשחק (GameLocation),
ממוצע דירוג פיב״א של הקבוצות ששיחקו באותו מיקום (AvgFibaRanking),
מספר המשחקים שהתקיימו באותו מקום,
מספר הקבוצות השונות שהשתתפו באותם משחקים.
השאילתא עושה שימוש ב־JOIN בין Game, Compets ו־NationalTeam, תוך כדי שימוש ב־AVG ו־ROUND כדי לחשב את ממוצע הדירוג בצורה מדויקת.
מיון התוצאה מתבצע לפי המיקומים עם הדירוג הממוצע הנמוך ביותר – כלומר המקומות שבהם שיחקו הקבוצות החזקות ביותר (עם דירוג נמוך).
מטרת השאילתא היא לעזור למנהלי הטורניר לזהות מקומות שמושכים קבוצות איכותיות ולתכנן שם טורנירים עתידיים.
<br>

צילום הרצה:
![image](https://github.com/user-attachments/assets/af8bd309-5da0-4890-ab5e-423b8047b5b7)


צילום תוצאה:
![image](https://github.com/user-attachments/assets/1e3a5309-e75f-4638-b436-374cafbb3d36)
<br>

שאילתא 5 – מספר משחקים ששפט כל שופט בכל שנה
<br>
שאילתא זו מציגה עבור כל שופט את מספר המשחקים שהוא שפט, לכל שנה בנפרד:
מזהה השופט (RefereeID),
שם פרטי ושם משפחה של השופט,
השנה שבה התקיימו המשחקים,
מספר המשחקים שהשופט שפט באותה שנה.
השאילתא משתמשת ב־JOIN בין הטבלאות Referee, Officiated_By ו־Game, ומבצעת GROUP BY לפי שופט ושנה.
בנוסף, נעשה שימוש ב־EXTRACT(YEAR) כדי לשלוף את השנה מתוך תאריך המשחק, ו־ORDER BY כדי למיין את התוצאה תחילה לפי שנה ואז לפי כמות המשחקים באופן יורד.
מטרת השאילתא היא לספק ניתוח סטטיסטי של היקף השיפוט של כל שופט לאורך השנים, ולזהות שופטים פעילים במיוחד
<br>

צילום הרצה:
![image](https://github.com/user-attachments/assets/522a5712-2b77-4864-b094-8021d6541b38)


צילום תוצאה:
![image](https://github.com/user-attachments/assets/ad203e73-1ea9-456e-be32-6106e940a89e)
<br>

שאילתא 6 – מיון שחקנים לפי עמדה
<br>
שאילתא זו מציגה רשימה של כל השחקנים במערכת, כשהם ממוינים לפי העמדה שבה הם משחקים:
מזהה השחקן (PlayerID),
שם פרטי ושם משפחה,
שם הנבחרת שאליה הוא שייך,
העמדה של השחקן (PlayerPosition).
השאילתא מצטרפת בין טבלאות Player ו־NationalTeam בעזרת JOIN, וממיינת את התוצאה לפי העמדה (PlayerPosition) ולאחר מכן לפי שם משפחה של השחקן.
כך ניתן לראות את כל השחקנים המחולקים לפי תפקיד – למשל: כל הסנטרים יחד, כל הגארדים יחד, וכן הלאה.
מטרת השאילתא היא לאפשר ניתוח של פריסת העמדות של כלל השחקנים בתחרות, במטרה להבין אילו עמדות דומיננטיות יותר, ולבחון את הרכב הקבוצות המתחרות מבחינת תפקוד על המגרש
<br>

צילום הרצה:
![image](https://github.com/user-attachments/assets/e5942f03-d77f-4d04-8a9f-f4743ca43cba)


צילום תוצאה:
![image](https://github.com/user-attachments/assets/053e87e4-0bc7-4f10-9574-7d5e5697f120)
<br>

שאילתא 7 – משחקים שבהם הפרש הנקודות היה יותר מ־20
<br>
שאילתא זו מציגה את כל המשחקים שבהם התקיים הפרש של יותר מ־20 נקודות בין שתי הקבוצות.
מזהה המשחק (GameID),
תאריך המשחק,
מיקום המשחק,
הפרש הנקודות (ההפרש בין הקבוצה עם הכי הרבה נקודות לבין הקבוצה עם הכי מעט).
השליפה מצטרפת בין Game ל־Compets באמצעות JOIN, ומקבצת לפי מזהה המשחק.
היא משתמשת ב־HAVING כדי לסנן רק את המשחקים שבהם ההפרש בין התוצאה הגבוהה ביותר לנמוכה ביותר גדול מ־20.
מטרת השאילתא היא לעזור לצוות המקצועי ולמארגני הטורניר לנתח משחקים חד־צדדיים, ולהבין אילו קבוצות הציגו יתרון בולט במיוחד.
<br>

צילום הרצה:
![image](https://github.com/user-attachments/assets/a47b3492-7500-4b6f-b88b-270335229cf9)


צילום תוצאה:
![image](https://github.com/user-attachments/assets/72ca938b-7991-4ad6-ab3f-170474f88c76)
<br>

שאילתא 8 – השחקן הצעיר ביותר בכל נבחרת
<br>
שאילתא זו מציגה את השחקן הכי צעיר בכל נבחרת (קבוצה), כלומר השחקן עם תאריך הלידה המאוחר ביותר בכל קבוצה:
מזהה השחקן (PlayerID),
שם פרטי ושם משפחה,
שם הנבחרת,
תאריך הלידה של השחקן.
השאילתא משתמשת ב־JOIN בין Player ל־NationalTeam, ובתת־שאילתה שמחזירה את תאריך הלידה המאוחר ביותר (MAX(PlayerBirthDate)) עבור כל TeamID.
לכל שחקן שנמצא תאריך זהה לזה שבתת־השאילתה – יוצג ברשימה.
מטרת השאילתא היא לאפשר למאמנים ולעוזרי מאמן לזהות את השחקנים הצעירים ביותר בכל נבחרת, לצורך פיתוח עתידי, קידום כישרונות צעירים או קבלת החלטות מקצועיות.
<br>

צילום הרצה:
![image](https://github.com/user-attachments/assets/dc8a9d20-5d60-41fa-b636-cc565d651f6c)


צילום תוצאה:
![image](https://github.com/user-attachments/assets/386599c2-c21f-4358-bb75-3f82defbb320)
<br>

---

### שאילתות UPDATE
שאילתא – UPDATE 1- הגדלת שנות ניסיון למאמנים של קבוצות ששיחקו מעל 5 משחקים
<br>
שאילתא זו מעדכנת את ערך ExperienceYears (שנות ניסיון) בטבלת Coach.
היא מאתרת את כל המאמנים שהקבוצות שלהם השתתפו ביותר מ־5 משחקים, ומוסיפה להם שנה אחת של ניסיון.
השאילתt מצרפת את הטבלאות NationalTeam ו־Compets, ומקבצת לפי CoachID
עבור כל מאמן שמספר המשחקים של קבוצתו גדול מ־5 – השאילתt מעדכנת את שנות הניסיון שלו
מטרת השאילתא היא לדמות מצב שבו ניסיון מקצועי של מאמנים עולה בהתאם לפעילות בפועל בטורנירים.
<br>
צילום לפני העדכון:
![image](https://github.com/user-attachments/assets/e34bdfff-3cad-4497-9e4a-8fae09cb3a8b)

צילום של הרצת השאילתא:
![image](https://github.com/user-attachments/assets/48330c3e-1607-4ebe-bebb-7e7cb7f5b777)

צילום אחרי העדכון:
![image](https://github.com/user-attachments/assets/833fd051-f5e7-4336-b074-89311ceed7cc)

<br>
שאילתא – UPDATE 2- הפחתת גובה רנדומלית (10–15 ס"מ) לשחקנים גבוהים מ־210 ס"מ

<br>
שאילתא זו מבצעת עדכון על טבלת Player ומפחיתה באופן רנדומלי בין 10 ל־15 ס"מ מגובה של שחקנים שגובהם מעל 210 ס"מ.
נבחרים רק שחקנים עם PlayerHeight > 210
לכל אחד מהם מופחת מספר רנדומלי בין 10 ל־15 באמצעות שימוש ב־RANDOM() ו־FLOOR()
כל שחקן מקבל ערך שונה בהתאם לתוצאה הרנדומלית.
מטרת השאילתא היא לדמות תיקון לטעויות הקלדה שגרמו לרישום גובה גבוה מדי.
<br>
צילום לפני העדכון:

![צילום מסך 2025-04-22 143032](https://github.com/user-attachments/assets/f7b44aea-3429-4795-a8cc-2c5482ded2c5)


צילום של הרצת השאילתא:

![image](https://github.com/user-attachments/assets/5cef799a-ddf1-4995-a467-e690c3128f72)

צילום אחרי העדכון:
![image](https://github.com/user-attachments/assets/06255c6a-27ef-4ce3-9e2e-af48edf34ed6)


<br>
שאילתא – UPDATE 3- עדכון עמדת שחקנים גבוהים ל־"Center"

<br>
שאילתא זו מעדכנת את טבלת Player ומשנה את העמדה (PlayerPosition) של כל שחקן שגובהו מעל או שווה ל־205 ס"מ ל־"Center", אך רק אם לא כבר מוגדר כ־Center.
נבחרים שחקנים עם PlayerHeight >= 205
מתבצעת בדיקה שעמדתם הנוכחית אינה Center (כדי להימנע מכפילות בעדכון)
אם התנאים מתקיימים – העמדה שלהם משתנה ל־Center
מטרת השאילתא היא ליישר קו בין נתוני השחקן לבין המציאות: שחקנים גבוהים במיוחד מתאימים לעמדת Center (סנטר), ולכן המערכת מעדכנת זאת אוטומטית.
<br>
צילום לפני העדכון:

![image](https://github.com/user-attachments/assets/decb4a2e-dde5-4672-90be-b0e2b2cec399)

צילום של הרצת השאילתא:

![image](https://github.com/user-attachments/assets/429b8406-0f23-42d7-89e7-7f6928b766c7)

צילום אחרי העדכון:
![image](https://github.com/user-attachments/assets/bb787249-1e0e-4f01-9115-ba01d9058e77)

<br>

---
### שאילתות DELETE
שאילתא- DELETE 1 – מחיקת רשומות מטבלת Compets עבור קבוצות שאין להן שחקנים
<br>
שאילתא זו מוחקת את ההשתתפויות בטורנירים (Compets) של קבוצות שאין להן אף שחקן בטבלת Player.
המחיקה נדרשת כדי לשחרר את אותן קבוצות מתלות של foreign key, מה שיאפשר למחוק אותן אח"כ גם מטבלת NationalTeam.
מטרת השאילתא היא להכין את הקרקע למחיקת קבוצות לא פעילות, מבלי לפגוע בשלמות הקשרים במסד.
<br>
צילום לפני המחיקה:
![image](https://github.com/user-attachments/assets/d2196f28-a7ea-4410-932b-a394493ba137)

צילום של הרצת השאילתא:
![image](https://github.com/user-attachments/assets/c4b41f69-be29-4df3-8671-9bc7a8bf3822)

צילום אחרי המחיקה:
![image](https://github.com/user-attachments/assets/4ae27ce9-1ef9-492b-8ce2-57430d400c27)

<br>

שאילתא – DELETE 2-מחיקת קבוצות שאין להן אף שחקן
<br>
שאילתא זו מוחקת מהטבלה NationalTeam את כל הקבוצות (נבחרות) שלא משויכים אליהן שחקנים.
הכוונה היא לקבוצות שאין להן אף שחקן בטבלת Player (כלומר TeamID שלהן לא מופיע שם כלל).
מתבצעת בדיקה של כל TeamID בטבלת NationalTeam
אם אותו TeamID אינו מופיע בטבלת Player – הקבוצה תימחק
מטרת השאילתא היא לנקות את מסד הנתונים מקבוצות לא פעילות או שגויות שהוזנו ללא שחקנים.
<br>
צילום לפני המחיקה:
![image](https://github.com/user-attachments/assets/dcce4552-5a35-4440-a833-11dc4fc2acaf)

צילום של הרצת השאילתא:
![image](https://github.com/user-attachments/assets/901acc36-ca92-49d4-9561-5f0001899fa0)

צילום אחרי המחיקה:
![image](https://github.com/user-attachments/assets/52f05856-1809-4e14-899e-d80f24431ccb)

<br>
שאילתא –DELETE 3 – מחיקת שופטים שלא שפטו אף משחק
<br>
שאילתא זו מוחקת מהטבלה Referee את כל השופטים שלא שפטו אפילו משחק אחד.
הבדיקה מתבצעת על ידי שימוש ב־NOT IN מול טבלת Officiated_By, שמכילה את הקשרים בין שופטים למשחקים.
רק שופטים שמזהה שלהם לא מופיע כלל בטבלת Officiated_By יימחקו.
מטרת השאילתא היא לנקות את המערכת משופטים לא פעילים או כאלו שהוזנו למערכת בטעות.
<br>
צילום לפני המחיקה:

![image](https://github.com/user-attachments/assets/674980c0-6a22-432e-8c2f-9abfbe8ba36a)


צילום של הרצת השאילתא:
![image](https://github.com/user-attachments/assets/b66612a6-1efe-4452-acdf-e5ee015c0797)

צילום אחרי המחיקה:
![image](https://github.com/user-attachments/assets/9ee88346-5ba2-47d0-8792-ca34bf46da5d)

<br>

---
### אילוצים (Constraints)

אילוץ 1- שנות ניסיון של מאמן
<br>
אילוץ מסוג CHECK המגביל את הערכים בשדה ExperienceYears בטבלת Coach לתחום שבין 0 ל־50. מטרת האילוץ היא למנוע הזנת ערכים שליליים או בלתי סבירים.

![image](https://github.com/user-attachments/assets/737202c5-20d8-4d42-a857-8089dc6f9dab)

ניסיון להפר את האילוץ:
![image](https://github.com/user-attachments/assets/5055add8-3b9c-44fa-9108-9f3a718b6963)
<br>
אילוץ 2- DEFAULT על שנות ניסיון של שופט
<br>
אילוץ מסוג DEFAULT בטבלה Referee אשר מגדיר שערך ברירת המחדל של השדה ExperienceYears יהיה 1 אם לא צוין ערך בעת ההוספה.


![image](https://github.com/user-attachments/assets/82cf12c2-a562-4d08-a314-aa45ffefb7ab)

ניסיון להכניס שופט בלי לציין ניסיון:

![image](https://github.com/user-attachments/assets/52161ee4-b18a-448b-961b-1a164411af00)
![image](https://github.com/user-attachments/assets/50dab7dd-21d3-437c-b49c-6110b0c1ba9b)
<br>
אילוץ 3 – NOT NULL על תאריך לידה של שחקן
<br>
אילוץ מסוג NOT NULL בטבלה Player, אשר מחייב שכל שחקן יקבל ערך בשדה PlayerBirthDate, ואוסר השארת השדה ריק. המטרה- לבדוק שהשחקן בגיל המתאים לשחק.


![image](https://github.com/user-attachments/assets/2200a9fe-8c12-4872-a9ce-d85f3b2eab0f)


ניסיון להזין שחקן בלי תאריך לידה:
![image](https://github.com/user-attachments/assets/e911ba90-9327-4555-bb9c-890033ba3c9e)

---
## שלב ג – אינטגרציה ומבטים

## תרשים ERD
![תרשים ERD](phase3/ERDAndDSTFiles/connectedERD.png)

## תרשים DSD
![תרשים DSD](phase3/ERDAndDSTFiles/connectedDSD.png)

## החלטות אינטגרציה
**החלטה ראשונה**- לאחד בין שחקני כדורסל לכדורגל ע"י ירושה.
<br>
ביצוע-
<br>
בשלב הזה ביצעתי אינטגרציה בין טבלאות שחקנים שהיו מופרדות לפי תחום (כדורסל וכדורגל), במטרה ליצור היררכיה מסודרת בין שחקן כללי (player) לבין שחקני תתי-התחומים (footballplayer, basketballplayer). הנה מה שעשיתי:
1. שימור מידע קיים:
![image](https://github.com/user-attachments/assets/5ce31e8f-dc7a-4eba-8ca8-d78a21526979)

בתחילה שיניתי את השמות של הטבלאות הקיימות לשמות גיבוי (_backup) כדי לא לאבד את הנתונים שכבר הוזנו, ולאפשר לי ליצור טבלאות חדשות עם שמות זהים אך מבנה שונה.
<br>
2. הגדרת טבלת על player:

![image](https://github.com/user-attachments/assets/1c88e87e-9ce4-4edb-8335-223cd5dc3e3a)

יצרתי טבלת על player שתכיל שדות כלליים הרלוונטיים לכל שחקן, ללא קשר לתחום הספורט שלו. בהמשך, טבלאות footballplayer ו־basketballplayer יורשות את המבנה הזה.
<br>
3. הגדרת טבלאות תתי־תחומים (Inherits):

![image](https://github.com/user-attachments/assets/780e7fff-2c74-4eeb-8589-ca44cf3d987e)

יצרתי שתי טבלאות שמרחיבות את טבלת העל – אחת לכדורגל ואחת לכדורסל – וכל אחת מהן מכילה שדות ייחודיים לספורט שלה (כמו goals, playerheight, וכו').
<br>
4. הזנת נתונים חכמים מהגיבוי:

![image](https://github.com/user-attachments/assets/5dcdc2b7-ed18-4aea-8b66-22ef0878f64c)

הכנסתי לטבלת שחקני הכדורגל נתונים מהגיבוי הישן players_backup, שכלל עמודת name מאוחדת – ולכן השתמשתי בפונקציית split_part כדי לפצל את השם המלא לשם פרטי ושם משפחה.
לעומת זאת:

![image](https://github.com/user-attachments/assets/44ee6d0a-7942-46dc-9955-6f897e1c57e0)

כאן לא הייתי צריכה לפצל שמות – כי במקור הנתונים היו כבר מופרדים.
<br>
5. בדיקה שהתהליך הצליח:

![image](https://github.com/user-attachments/assets/58f24656-5622-457f-83bb-7eefb9373280)

לבסוף ווידאתי שהטבלה player מכילה נתונים – מאחר והיא טבלת על שנוצרה כ־inherited, היא מציגה גם את כל הנתונים שנכנסו לטבלאות הבנות.
<br>
<br>
**החלטה שניה**- ל2 הקבוצות הייתה טבלה של פרטי קבוצה אז איחדתי אותם.
<br>
ביצוע-
<br>
בשלב הזה רציתי לאחד את המידע על קבוצות מכל סוגי הספורט (כדורסל וכדורגל) לטבלה אחת אחידה, כדי לאפשר גישה נוחה יותר לכל הקבוצות הלאומיות בלי לנהל טבלאות נפרדות. להלן הפעולות שביצעתי ולמה:
1. שמירת עותק גיבוי של הטבלאות המקוריות:

![image](https://github.com/user-attachments/assets/4ac22d38-c192-40e2-93d0-54c786bc122f)

כדי לא לאבד את המידע המקורי מהטבלאות nationalteam (מהאגף שלי) ו־teams (מהאגף שקיבלתי), יצרתי מהן עותקי גיבוי עם סיומת _backup.
<br>
2.הגדרת טבלה מאוחדת nationalteam:

![image](https://github.com/user-attachments/assets/7535290f-5d8c-4b42-b9f3-1470654e8e85)

יצרתי טבלה חדשה בשם nationalteam שמאגדת את כל המאפיינים של קבוצות כדורגל וכדורסל. חלק מהשדות רלוונטיים רק לכדורסל (כמו teamcountry, uniformcolor), אחרים רק לכדורגל (team_group), וחלק משותפים לשניהם (כמו teamname, fiba_ranking). הוספתי גם את העמודה sporttype כדי לזהות את סוג הספורט.
<br>
3. העברת קבוצות כדורסל מהטבלה המקורית:

![image](https://github.com/user-attachments/assets/28612b8c-2f5a-4369-b422-93edf59b1d5e)

הכנסתי את כל הקבוצות שהיו בטבלה nationalteam_backup (שמקורה בטבלת קבוצות הכדורסל שלי) לטבלה החדשה, עם ערך basketball בעמודת sporttype.
<br>
4.העברת קבוצות כדורגל עם עיבוד מיוחד:

![image](https://github.com/user-attachments/assets/ac9d37b6-3046-49cf-8c1c-fe2d1cfc06e4)

כדי להכניס קבוצות כדורגל מהטבלה teams_backup, ביצעתי כמה התאמות:
א. יצרתי מזהה coachid חדש אוטומטית, כי לא היה כזה בטבלה המקורית.

ב. אם team_id מהכדורגל מתנגש עם teamid שכבר הוזן עבור קבוצת כדורסל – הוספתי לו 400 כדי להימנע מקונפליקט.

ג. סימנתי football בעמודת sporttype.
<br>
5. הגדרת מפתח זר בין player ל־nationalteam:

![image](https://github.com/user-attachments/assets/eb27a8b5-e907-40b2-a5a5-89e0d62867fd)

לבסוף חיברתי את טבלת player לטבלה nationalteam דרך המזהה teamid. כך כל שחקן שייך לקבוצה הלאומית הנכונה, בין אם הוא שחקן כדורגל ובין אם כדורסל.
<br>
<br>
**החלטה שלישית**- לסדר שיהיה מאמן בטבלה נפרדת לכולם.
<br>
ביצוע-בשלב הזה רציתי לוודא שכל המאמנים מכל קבוצות הספורט יופיעו בטבלה אחת אחידה בשם coach, ללא כפילויות, ושהמבנה שלה יתאים גם למאמנים מהאגף שקיבלתי.
1. הסרת דרישת NOT NULL משדות בטבלת coach:


![image](https://github.com/user-attachments/assets/63285569-b8ad-444c-acf2-f23f316ea511)

בטבלת coach המקורית שלי (מהאגף של הכדורסל) היו דרישות שכל שדה (שם פרטי, שם משפחה וניסיון) יהיה חובה (NOT NULL).
אבל מהטבלה שקיבלתי (של קבוצות הכדורגל) ייבאתי מאמנים שיש להם רק מזהה (coachid), ללא פרטים נוספים.
לכן ביטלתי את הדרישה הזו כדי לאפשר הזנה של מאמנים עם פרטים חלקיים.
<br>
2. הוספת מאמנים שחסרים בטבלה:

![image](https://github.com/user-attachments/assets/c07db0c4-24ec-4d18-98d5-49755b06cf8f)

הכנסתי את כל המאמנים של קבוצות הכדורגל מהטבלה nationalteam, כל עוד הם עדיין לא קיימים בטבלת coach.
עשיתי את זה כדי שכל קבוצות הכדורגל יהיו מקושרות למאמנים שלהם, גם אם הפרטים האישיים של המאמן לא קיימים.
כך נשמר הקשר בין קבוצה למאמן, בלי להכניס כפילויות.
<br>
<br>
**החלטה רביעית**- ליצור ירושה שניה-משחקים.
<br>
ביצוע-בשלב הזה רציתי לאחד את המידע על כל המשחקים מכל סוגי הספורט לטבלה היררכית אחת – game – שממנה יורשות שתי טבלאות: footballgame ו־basketballgame.
1. שימור נתוני המשחקים המקוריים:

![image](https://github.com/user-attachments/assets/3ddecbf4-edd3-4786-9857-c1dd9a4e4f3e)

כדי לשמור את המידע שהיה לי בטבלת game הקיימת, שיניתי את שמה ל־game_backup. זה מאפשר לי לבנות מחדש את מבנה המשחקים באופן מסודר, בלי לאבד מידע קודם.
<br>
2. הגדרת טבלת־על game:

![image](https://github.com/user-attachments/assets/8dd66b81-674b-46d4-9aa1-8bc2cf4e451a)

יצרתי את טבלת־העל game שמכילה מידע בסיסי וכללי על כל משחק – תאריך, מיקום, ומזהה משחק. ממנה יורשו הטבלאות הספציפיות של כדורגל וכדורסל.
<br>
3.יצירת טבלת משחקי כדורגל עם שדות ייחודיים:

![image](https://github.com/user-attachments/assets/fe8ca262-2110-4065-8dcd-1f8143dca418)

הטבלה footballgame יורשת את כל השדות מ־game, ובנוסף מכילה שדות ייחודיים למשחקי כדורגל – תוצאה, אצטדיון, שלב בטורניר ואירוע (event).
שדות אלה מקושרים באמצעות מפתחות זרים לטבלאות אחרות – stadiums, tournamentstages, matchevents.
<br>
4.יצירת טבלת משחקי כדורסל:

![image](https://github.com/user-attachments/assets/e7775a4a-13d9-4808-9e26-edfeead17b80)

הטבלה basketballgame גם היא יורשת מ־game, אך לפי התרשים – אין לה כרגע שדות ייחודיים. היא נועדה להכיל רק את המשחקים מהסוג הזה.
<br>
5. הזנת נתוני משחקי כדורגל ממקור חיצוני:

![image](https://github.com/user-attachments/assets/44251017-2d69-458d-9cd6-3b0a7e3fa5e7)

ייבאתי נתונים ממקור בשם matches, שמכיל משחקי כדורגל בלבד. את gamelocation השארתי כ־NULL כי כנראה הוא לא הופיע במקור.
שדות כמו score_team1, stadium_id ועוד – שייכים רק לכדורגל ולכן הוזנו רק כאן.
<br>
6.שחזור נתוני משחקי כדורסל מהגיבוי:

![image](https://github.com/user-attachments/assets/ecc7f6c0-7fc1-46b2-9cbb-4423b93962bd)

הכנסתי את כל נתוני משחקי הכדורסל מהטבלה הקודמת game_backup אל תוך basketballgame.
<br>
7. בדיקת תקינות – ספירת כלל הנתונים:

![image](https://github.com/user-attachments/assets/23c314ed-5853-4968-94f6-fb013a4dba64)

לבסוף בדקתי כמה רשומות קיימות בטבלת־העל game. מכיוון ש־footballgame ו־basketballgame יורשות ממנה, הספירה כוללת גם את כל הנתונים שנמצאים בתוכן – וכך אני יודעת שהתהליך הצליח.
<br>
<br>
**החלטה חמישית**- קישור של חלק מהדברים שקשורים רק לכדורגל
<br>
ביצוע-בשלב הזה רציתי לוודא שטבלת matchevents (אירועים במשחקים) מתייחסת אך ורק לשחקני כדורגל ולמשחקי כדורגל – ולא לכלל השחקנים או המשחקים. זה חשוב כי האירועים מתועדים רק עבור משחקי כדורגל, ולכן הקשרים הקיימים בטבלה היו לא מדויקים או כלליים מדי.

1. ביטול הקשר הקודם בין matchevents ל־player:

![image](https://github.com/user-attachments/assets/b27f3972-317d-4239-a98e-260fd6faa625)

בטבלה המקורית, האירועים היו מקושרים לטבלת player, כלומר לכלל השחקנים – כולל שחקני כדורסל. כדי לדייק את המודל, הסרתי את הקשר הזה.
<br>
2. וידוא שיש ייחודיות בשדה playerid בטבלת footballplayer:

![image](https://github.com/user-attachments/assets/8de2d413-5e95-42a9-a7ee-f81af126b6b2)

כדי שטבלת matchevents תוכל להצביע בצורה תקנית רק על שחקני כדורגל, הוספתי לטבלה footballplayer מגבלה של ייחוד (UNIQUE) על playerid. זהו תנאי הכרחי להגדרת מפתח זר.
<br>
3. הגדרת קשר חדש מ־matchevents ל־footballplayer:

![image](https://github.com/user-attachments/assets/171ce44e-2ea8-4da0-a97c-2c35d7f961ad)

כעת יצרתי מפתח זר שמקשר את עמודת player_id ב־matchevents ישירות לשחקני כדורגל בלבד – כך שלא ייתכן שמופע אירוע יתייחס לשחקן שאינו שייך לענף הזה.
<br>
4. ביטול הקשר הקודם בין matchevents ל־game:

![image](https://github.com/user-attachments/assets/e564d640-65f0-4824-8a83-0cb1f4f54fa9)

בדומה לשחקנים – גם כאן האירועים היו מקושרים לכלל המשחקים (game) במקום רק למשחקי כדורגל.
<br>
5. וידוא ייחודיות של gameid בטבלת footballgame:

![image](https://github.com/user-attachments/assets/b63c3a6f-6711-4be4-8b24-2625b5f81f69)

כדי שטבלת האירועים תוכל לקשר למשחקי כדורגל בלבד, הוספתי מגבלה של ייחוד על gameid בטבלת footballgame.
<br>
6. הגדרת קשר חדש מ־matchevents ל־footballgame:

![image](https://github.com/user-attachments/assets/e00eaafd-10f4-4249-a3fb-2b0cf95d9f78)

כך כל אירוע יפנה מעתה אך ורק למשחק כדורגל, ולא לכל סוג של משחק.
<br>
7. ביטול קשר ישיר מ־footballgame חזרה ל־matchevents:

![image](https://github.com/user-attachments/assets/a4b5b6cf-d26e-434b-91c9-71a1e1d8eab5)

לבסוף הסרתי את הקשר ההפוך שהיה קיים בטבלת footballgame לעמודת event_id, כיוון שהוא לא היה תקף במודל הנוכחי – הרי ייתכנו מספר אירועים בכל משחק, ולכן אין טעם לשמור עמודת אירוע אחת בטבלת המשחקים.
<br>
<br>
**החלטה שישית**- קישור בין טורנירים למשחקים
<brr>
ביצוע-בשלב הזה רציתי להגדיר קשר תקין בין טורנירים למשחקים עצמם, כך שנדע בדיוק באיזה טורניר כל משחק התרחש. בנוסף, הייתי צריכה לשנות את שם טבלת הביניים שכבר הייתה קיימת — ולהתאים אותה למשמעות האמיתית שלה.
<br>
1. שינוי שם הטבלה Officiated_By ל־Competes_In:

![image](https://github.com/user-attachments/assets/cf173841-636c-4003-b1c6-76925bddc057)

הטבלה Officiated_By שימשה כטבלת ביניים בין game ל־tournament, אבל השם שלה לא תאם את התפקיד האמיתי שלה.
במקום לתאר שיפוט, היא תיארה השתתפות של משחקים בטורניר — ולכן שיניתי את שמה ל־Competes_In, מה שמשקף נכון את המשמעות הלוגית שלה.
<br>
2. הוספת מזהה טורניר לכל משחק בטבלת game:

![image](https://github.com/user-attachments/assets/3c0013d6-b913-423c-b77f-118a689afa2b)

כדי שכל משחק יוכל להשתייך לטורניר כלשהו (ולא רק דרך טבלה מתווכת), הוספתי עמודה חדשה tournamentid ישירות בטבלת־העל game.
עמודה זו תאפשר לדעת עבור כל משחק לאיזה טורניר הוא משויך — בין אם זה כדורגל או כדורסל.
<br>
3. יצירת קשר ישיר (Foreign Key) בין game ל־tournament:

![image](https://github.com/user-attachments/assets/f3ed068b-be59-439e-a6b1-191182c9d0d1)

לבסוף יצרתי מפתח זר שמוודא ש־tournamentid בטבלת game באמת קיים בטבלת tournament.
כך נוצר קשר עקבי בין משחקים לטורנירים, שמבטיח שלכל משחק שמוזן יש טורניר תקף במסד הנתונים.
<br>
<br>
**החלטה שביעית**-  קישור בין נבחרות למאמנים וטורנירים
<br>
ביצוע-בשלב הזה רציתי לוודא שטבלת nationalteam (הנבחרות הלאומיות) מקושרת למאמנים הרלוונטיים, ושגם טבלת compets (שמתארת השתתפות בטורנירים) מקושרת לנבחרות בצורה תקינה. אלו קשרים חשובים למודל הנתונים כדי לאפשר מעקב אחר זהות המאמן ואילו קבוצות השתתפו באיזה טורניר.
1. הוספת קשר בין נבחרת למאמן:

![image](https://github.com/user-attachments/assets/af4fd903-85de-42b2-90ff-a7b58f2ecef8)

כדי שלכל נבחרת תהיה הפניה תקפה למאמן שלה, יצרתי מפתח זר מהעמודה coachid בטבלת nationalteam לטבלת coach.
הקשר הזה מבטיח שכל מזהה מאמן שמופיע בקבוצה קיים גם באמת בטבלת המאמנים — וכך נשמרת תקינות המידע.
<br>
2. תיקון הקשר בין טבלת compets לנבחרות:

![image](https://github.com/user-attachments/assets/22432ce8-6ee9-45e8-b26a-2e1044d42b64)

במקור, טבלת compets הכילה מפתח זר לעמודה teamid, אבל הקשר הזה נבנה לפני ביצוע האינטגרציה, ולכן ייתכן שהיה מפנה לטבלת teams או מבנה ישן.
כדי להבטיח שהקשר מתייחס למבנה המעודכן – מחקתי את המפתח הזר הקודם והגדרתי מפתח זר חדש, שמפנה ישירות לטבלת nationalteam שאיחדה את כל קבוצות הכדורגל והכדורסל.
<br>
<br>
**החלטה שמינית**-קישור נכון בין שחקני כדורגל למשחקים
<br>
ביצוע-בשלב הזה רציתי לדאוג לכך שטבלת playersinmatches, שמתארת אילו שחקנים שיחקו באילו משחקים, תתייחס רק לשחקני כדורגל ול־משחקי כדורגל, בהתאם למבנה החדש של המערכת אחרי האינטגרציה.
1. ביטול קשרים ישנים וכלליים:

![image](https://github.com/user-attachments/assets/ced9a6c8-244b-47ce-8f9b-0a17e61e0d05)

במקור, טבלת playersinmatches הייתה מקושרת ישירות ל־player ול־game, כלומר לכל שחקן ולכל משחק מכל סוג.
מכיוון שהטבלה הזו מיועדת לתעד השתתפות של שחקני כדורגל בלבד, היה צורך להסיר את המפתחות הזרים הכלליים הקודמים.
<br>
2. קישור חדש לשחקני כדורגל בלבד:

![image](https://github.com/user-attachments/assets/acacf8a9-a416-4400-a302-7f5a40ceee3d)

כאן יצרתי מפתח זר חדש שמוודא שכל player_id שמופיע בטבלת playersinmatches קיים בטבלת footballplayer בלבד – כלומר, מדובר בשחקן כדורגל אמיתי.
זה מונע מצב שבו שחקן כדורסל משויך בטעות למשחק כדורגל.
<br>
3. קישור חדש למשחקי כדורגל בלבד:

![image](https://github.com/user-attachments/assets/2e02cbfe-cf48-4a15-9c04-a02116a598ff)

כאן יצרתי מפתח זר חדש לעמודת match_id, כך שהטבלה תכיל רק משחקים שמופיעים ב־footballgame.
בכך הבטחתי שהטבלה playersinmatches תישאר ממוקדת – ותשמש רק לתיעוד השתתפות שחקני כדורגל במשחקי כדורגל.
<br>
<br>
**החלטה תשיעית**-חיבור שלבי הטורניר לטורניר הראשי וניקוי שדות ישנים.
<br>
ביצוע-בשלב הזה רציתי לחזק את הקשר בין טבלת שלבי הטורניר (tournamentstages) לבין טבלת הטורנירים הכללית (tournament), כדי לדעת כל שלב לאיזה טורניר הוא שייך. בנוסף, הסרתי שדה שהיה מיותר או חזר על מידע קיים.
1. הוספת עמודה tournamentid אם היא לא קיימת:

![image](https://github.com/user-attachments/assets/2978aa48-0f59-467b-be0f-08792392bb67)

הוספתי עמודה חדשה בשם tournamentid לטבלת tournamentstages.
עמודה זו תאפשר לכל שלב טורניר לדעת לאיזה טורניר הוא שייך – קשר חיוני במודל נתונים שמתאר מבנה טורניר אמיתי.
<br>
2. הוספת מפתח זר לקשר בין tournamentstages ל־tournament:

![image](https://github.com/user-attachments/assets/40cb85aa-1e33-48fa-9a99-1db34d0c639d)

יצרתי מפתח זר שמחבר את העמודה החדשה tournamentid לעמודת המפתח הראשי של טבלת tournament.
בכך הבטחתי שכל שלב שייכת באמת לטורניר קיים – ולא "שלב יתום" שלא קשור לכלום.
<br>
3. הסרת עמודה מיותרת matches_count:

![image](https://github.com/user-attachments/assets/38686c9c-09cd-40dc-92b0-d0954b7ef199)

העמודה matches_count הייתה קיימת בטבלה המקורית, אבל כנראה הכילה מידע שאפשר לחשב בקלות ממספר המשחקים בפועל (למשל עם COUNT).
כדי למנוע כפילויות ושמירה של מידע שאינו נדרש – מחקתי את העמודה הזו.
<br>
<br>
**לסיום**-בסיום תהליך האינטגרציה, לאחר שווידאתי שכל הנתונים הועברו כראוי לטבלאות החדשות והקשרים מעודכנים – עברתי לשלב האחרון: ניקוי טבלאות הגיבוי והטבלאות הישנות שכבר לא בשימוש.

![image](https://github.com/user-attachments/assets/8e3e3bac-139d-49f4-a6e5-7fabe10d15a6)
במהלך העבודה יצרתי עותקים מגובים של טבלאות מקוריות (עם הסיומת _backup) כדי להימנע מאיבוד מידע תוך כדי אינטגרציה.
כעת, אחרי שהנתונים הוזנו לטבלאות המאוחדות החדשות, והקשרים מוגדרים בצורה תקינה – מחקתי את כל טבלאות הגיבוי.
הוספתי את מילת המפתח CASCADE כדי שגם תלותים (כמו מפתחות זרים זמניים) יימחקו איתן אם קיימים.
<br>

---
### מבט 1 – שחקני כדורסל לפי נבחרת
**תיאור מילולי:**
המבט מאחד מידע על שחקני כדורסל עם פרטי הקבוצה שלהם.
הוא מבוסס על טבלאות basketballplayer, player, ו־nationalteam, תוך שימוש בקשרים היררכיים ו־JOIN לפי playerid ו־teamid.
המבט כולל את שם השחקן, הגובה שלו, מספר החולצה, ושם הנבחרת בה הוא משחק
<br>
**שליפת נתונים (10 רשומות):**

![image](https://github.com/user-attachments/assets/f4fe3998-43c5-406a-8dde-be654972a4ff)

**שאילתה 1** – כמה שחקנים יש בכל קבוצה: סופרת כמה שחקנים משחקים בכל נבחרת לפי שם הקבוצה.

![צילום מסך 2025-05-25 101801](https://github.com/user-attachments/assets/eef49f83-7f2e-4fea-b125-ed0782e44fef)

**שאילתה 2** – אילו שחקנים גבוהים מ־190 ס״מ: מאחזרת שמות של שחקנים גבוהים במיוחד לפי סף גובה.

![צילום מסך 2025-05-25 101837](https://github.com/user-attachments/assets/dfbed593-65ed-4751-a095-8e656cd4c8bf)

<br>

---
### מבט 2 – שחקני כדורגל לפי משחקים
**תיאור מילולי:**
המבט מאחד מידע על שחקני כדורגל עם המשחקים שבהם השתתפו.
מבוסס על טבלאות footballplayer, player, footballgame ו־playersinmatches.
המבט כולל שם שחקן, מזהה משחק, תאריך, מקום, ופרטי ההשתתפות.

**שליפת נתונים (10 רשומות):**

![image](https://github.com/user-attachments/assets/d90ebb99-2e4e-4e4b-b97d-0262aa73d85b)

**שאילתה 1** – שחקנים שהשתתפו ביותר ממשחק אחד: בודקת אילו שחקנים הופיעו במספר משחקים ומציינת כמה בדיוק.

![צילום מסך 2025-05-25 102355](https://github.com/user-attachments/assets/cd7c51f1-67db-468f-9034-e8db9e9de967)

**שאילתה 2** – שאילתה זו מציגה את רשימת שחקני הכדורגל שהשתתפו ביותר ממשחק אחד.

![image](https://github.com/user-attachments/assets/1d27cef7-a90f-4b82-97a4-3a1db8362c7d)

הצגת 2 המבטים:

![צילום מסך 2025-05-25 102213](https://github.com/user-attachments/assets/53bccf66-093a-4004-ba57-fd8ba489db38)

<br>

---
## שלב ד'-תכנות
### תוכנית ראשונה
הקוד הראשי מפעיל תוכנית DO בשפת PL/pgSQL שמטרתה לקשר בין פעולת עדכון נתוני מאמנים לבין הצגת ביצועי שחקנים. בשלב הראשון, התוכנית מפעילה את הפרוצדורה increase_experience_of_coaches, אשר מעדכנת את שנות הניסיון של המאמנים בקבוצות הלאומיות בהתאם לדירוג הקבוצה וסוג הספורט. לאחר מכן, התוכנית מבצעת שאילתה על הפונקציה get_all_players_points ומדפיסה למסך את פרטי השחקנים — כולל מזהה, שם פרטי, שם משפחה, סוג הספורט וסך הנקודות שצבר כל שחקן. בדרך זו, התוכנית יוצרת חיבור לוגי בין עדכון המאמנים לבין ניתוח ביצועי השחקנים.
<br>
![image](https://github.com/user-attachments/assets/eea41f48-c5dd-4d52-aeb6-e384b48c65e9)
<br>
הפרוצדורה increase_experience_of_coaches אחראית על עדכון נתוני ניסיון של מאמנים בקבוצות לאומיות שהדירוג שלהן גבוה מ־50 (נמוך יחסית). הפרוצדורה מבצעת לולאה על כל הקבוצות המתאימות, ולכל מאמן היא מוסיפה שנות ניסיון לפי סוג הספורט: שנה אחת למאמני כדורסל, ושנתיים למאמני כדורגל. אם המאמן כבר קיים בטבלת המאמנים (coach), מתבצע עדכון; אם לא, מתבצע ניסיון להכניס שורה חדשה עם מספר שנות הניסיון הרלוונטי. פעולה זו מאפשרת לשמור על רמת ניסיון ריאלית ועדכנית של המאמנים בהתאם להישגי קבוצותיהם.
<br>
![צילום מסך 2025-05-28 190340](https://github.com/user-attachments/assets/fdcf6aac-a8d9-4ad1-bdda-61e1f6e1c096)
<br>
הפונקציה get_all_players_points מחזירה טבלה מאוחדת שמציגה את כלל השחקנים (כדורסל וכדורגל) עם המידע האישי שלהם וסך הנקודות שצברו. הפונקציה משתמשת באיחוד (UNION) של שתי שאילתות: אחת על טבלת שחקני הכדורסל (basketballplayer) והשנייה על טבלת שחקני הכדורגל (footballplayer), תוך שילוב מידע מטבלת player. כל שחקן מוצג עם מזהה, שם פרטי, שם משפחה, סוג הספורט הרלוונטי, והמספר הכולל של נקודות (או שערים). פונקציה זו שימושית לצורך בניית דוחות או מערכות דירוג אחידות לשחקנים משני תחומים שונים.
<br>
![צילום מסך 2025-05-28 190257](https://github.com/user-attachments/assets/1bb5d74a-9400-4cdc-aae2-186b4af29516)
<br>

### תוכנית שניה








</div>

